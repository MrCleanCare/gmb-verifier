<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø£Ø¯Ø§Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø¹Ù„Ù‰ Google</title>
  <script src="config.js"></script>
  <style>
    body { font-family: Tahoma, sans-serif; direction: rtl; padding: 20px; background: #f1f3f4; }
    .form { background: white; padding: 20px; border-radius: 10px; max-width: 700px; margin: auto; box-shadow: 0 0 10px #ccc; }
    label { font-weight: bold; margin-top: 10px; display: block; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 6px; }
    button { padding: 12px 20px; background-color: #1a73e8; color: white; border: none; border-radius: 6px; cursor: pointer; }
    .result { margin-top: 20px; padding: 15px; border-radius: 8px; background: #eef; }
  </style>
</head>
<body>

  <script>
    // Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† OAuth Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ GitHub Pages Ø§Ù„ØµØ­ÙŠØ­
    if (window.location.pathname === "/" && window.location.hash.includes("access_token")) {
      const newUrl = "https://mrcleancare.github.io/gmb-verifier/" + window.location.hash;
      window.location.replace(newUrl);
    }
  </script>

  <div class="form">
    <h2>Ø£Ø¯Ø§Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„Ù Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</h2>

    <label>Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø·:</label>
    <input type="text" id="businessName" value="Ø´Ø±ÙƒØ© Ø¹Ø§Ù„Ù… Ø§Ù„Ù†Ø¸Ø§ÙØ© Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ©">

    <label>Ø§Ù„ÙØ¦Ø©:</label>
    <input type="text" id="category" value="Ø´Ø±ÙƒØ© ØªÙ†Ø¸ÙŠÙ">

    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
    <textarea id="address">Ø¬Ø¯Ø©ØŒ Ø­ÙŠ Ø§Ù„Ø¨Ø´Ø§Ø¦Ø±ØŒ Ø´Ø§Ø±Ø¹ Ø£Ø¨ÙŠ ÙØ±Ø§Ø³ Ø§Ù„Ø­Ù…Ø¯Ø§Ù†ÙŠ</textarea>

    <label>Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª (latitude, longitude):</label>
    <input type="text" id="coordinates" value="21.7897761, 39.1821582">

    <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:</label>
    <input type="text" id="phone" value="+966559061065">

    <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹:</label>
    <input type="text" id="website" value="https://m-clean.net">

    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
    <input type="text" id="email" value="admin@m-clean.net">

    <button onclick="validateProfile()">ØªØ­Ù‚Ù‚ Ø§Ù„Ø¢Ù†</button>

    <div id="resultBox" class="result"></div>
  </div>

  <script>
    function validateProfile() {
      window.messages = [];
      window.passed = true;

      window.name = document.getElementById("businessName").value;
      const coordinates = document.getElementById("coordinates").value;
      const latLng = coordinates.split(',');
      const lat = parseFloat(latLng[0]);
      const lng = parseFloat(latLng[1]);

      const token = getAccessTokenFromUrl();
      if (token) {
        checkSiteInSearchConsoleOAuth(token, SEARCH_CONSOLE_SITE, messages, passed, (msgs1, status1) => {
          verifyBusinessPlace(name, lat, lng, msgs1, status1, (msgs2, status2) => {
            const resultBox = document.getElementById("resultBox");
            resultBox.className = 'result ' + (status2 ? 'success' : 'error');
            resultBox.innerHTML = `<ul>${msgs2.map(msg => `<li>${msg}</li>`).join('')}</ul>`;
          });
        });
      } else {
        messages.push("ğŸ” Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¹Ø¯. Ø§Ø¶ØºØ· Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.");
        const resultBox = document.getElementById("resultBox");
        resultBox.innerHTML = "";
        const btn = document.createElement("button");
        btn.innerText = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Google";
        btn.onclick = () => authenticateWithGoogle();
        resultBox.appendChild(btn);
      }
    }
  </script>
</body>
</html>
